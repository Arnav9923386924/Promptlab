# Advanced Support Routing - Ambiguous & Multi-intent Cases
metadata:
  name: Support Routing - Advanced
  tags: [routing, classification, edge-cases]

defaults:
  temperature: 0

cases:
  # === CLEAR INTENTS ===
  - id: billing-fraud
    prompt: |
      Classify into: BILLING, TECHNICAL, SHIPPING, ACCOUNT, SALES, or URGENT.
      Reply with one word.
      Message: "Someone made unauthorized purchases on my account!"
    assertions:
      - type: regex
        pattern: "(?i)(billing|urgent|account)"

  - id: tech-data-loss
    prompt: |
      Classify into: BILLING, TECHNICAL, SHIPPING, ACCOUNT, SALES, or URGENT.
      Reply with one word.
      Message: "I accidentally deleted all my files. Can they be recovered?"
    assertions:
      - type: regex
        pattern: "(?i)technical"

  - id: shipping-damaged
    prompt: |
      Classify into: BILLING, TECHNICAL, SHIPPING, ACCOUNT, SALES, or URGENT.
      Reply with one word.
      Message: "My package arrived completely crushed and the contents are broken."
    assertions:
      - type: regex
        pattern: "(?i)shipping"

  # === MULTI-INTENT (harder) ===
  - id: multi-billing-tech
    prompt: |
      Classify into the PRIMARY category: BILLING, TECHNICAL, SHIPPING, ACCOUNT, SALES.
      Reply with one word.
      Message: "I'm being charged for premium features but they're not working for me."
    assertions:
      - type: regex
        pattern: "(?i)(billing|technical)"

  - id: multi-account-tech
    prompt: |
      Classify into the PRIMARY category: BILLING, TECHNICAL, SHIPPING, ACCOUNT, SALES.
      Reply with one word.
      Message: "I can't reset my password because the email never arrives."
    assertions:
      - type: regex
        pattern: "(?i)(account|technical)"

  - id: multi-shipping-billing
    prompt: |
      Classify into the PRIMARY category: BILLING, TECHNICAL, SHIPPING, ACCOUNT, SALES.
      Reply with one word.
      Message: "I was charged for expedited shipping but it came late anyway."
    assertions:
      - type: regex
        pattern: "(?i)(shipping|billing)"

  # === FRUSTRATED CUSTOMERS ===
  - id: angry-escalation
    prompt: |
      Classify into: BILLING, TECHNICAL, SHIPPING, ACCOUNT, SALES, or ESCALATION.
      Reply with one word.
      Message: "THIS IS THE FIFTH TIME I'M CONTACTING YOU!!! I need to speak to a manager NOW!"
    assertions:
      - type: regex
        pattern: "(?i)escalation"

  - id: threatening-legal
    prompt: |
      Classify into: BILLING, TECHNICAL, SHIPPING, ACCOUNT, SALES, or ESCALATION.
      Reply with one word.
      Message: "If this isn't resolved by tomorrow, I'm contacting my lawyer."
    assertions:
      - type: regex
        pattern: "(?i)escalation"

  # === VAGUE REQUESTS ===
  - id: vague-help
    prompt: |
      Classify into: BILLING, TECHNICAL, SHIPPING, ACCOUNT, SALES, or OTHER.
      Reply with one word.
      Message: "I need help with my order."
    assertions:
      - type: regex
        pattern: "(?i)(shipping|other)"

  - id: vague-problem
    prompt: |
      Classify into: BILLING, TECHNICAL, SHIPPING, ACCOUNT, SALES, or OTHER.
      Reply with one word.
      Message: "Something's wrong with my account."
    assertions:
      - type: regex
        pattern: "(?i)(account|other)"

  # === INTERNATIONAL / LANGUAGE ===
  - id: spanish-mixed
    prompt: |
      Classify into: BILLING, TECHNICAL, SHIPPING, ACCOUNT, SALES.
      Reply with one word.
      Message: "No puedo login to my account."
    assertions:
      - type: regex
        pattern: "(?i)account"

  - id: typos-heavy
    prompt: |
      Classify into: BILLING, TECHNICAL, SHIPPING, ACCOUNT, SALES.
      Reply with one word.
      Message: "i cnat acess my acount plz help asap!!!"
    assertions:
      - type: regex
        pattern: "(?i)account"

  # === SALES INQUIRIES ===
  - id: sales-competitor
    prompt: |
      Classify into: BILLING, TECHNICAL, SHIPPING, ACCOUNT, SALES.
      Reply with one word.
      Message: "How does your pricing compare to [Competitor]?"
    assertions:
      - type: regex
        pattern: "(?i)sales"

  - id: sales-enterprise
    prompt: |
      Classify into: BILLING, TECHNICAL, SHIPPING, ACCOUNT, SALES.
      Reply with one word.
      Message: "We're a company with 500 employees looking for a custom solution."
    assertions:
      - type: regex
        pattern: "(?i)sales"
